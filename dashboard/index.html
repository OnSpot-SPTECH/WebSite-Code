<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link rel="stylesheet" href="style.css">

	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

</head>

<body>
	<!-- Header -->
	<header>
		<img class="img-logo" src="./img/Frame 12 copy.svg" alt="">
		<nav>
			<ul>
				<li>
					<a href="../login.html">Sair<img class="icone-logout" src="../assets/icone-logout.svg" alt=""></a>
				</li>
			</ul>
		</nav>
	</header>
	<!--  -->
	<main>
		<div class="div_main">
			<button class="btn_sala" onclick="fecharSalas()">Salas</button>
			<div class="div_salas">
				<ul class="ul_salas">
					<li>
						<button>Sala 1</button>
					</li>
					<li>
						<button>Sala 2</button>
					</li>
					<li>
						<button>Sala 3</button>
					</li>
					<li>
						<button>Sala 4</button>
					</li>
					<li>
						<button>Sala 5</button>
					</li>
					<li>
						<button>Sala 6</button>
					</li>
					<li>
						<button>Sala 7</button>
					</li>
					<li>
						<button>Sala 8</button>
					</li>
				</ul>
				<ul class="ul_sensores">
					<li class="div_sensor_sala1 sensor_sala">
					Sensor 1
					
						<canvas id="mainGraficoUmidade2"></canvas>
					
					</li>
					<li class="div_sensor_sala2 sensor_sala">
					Sensor 2
						<canvas id="mainGraficoUmidade3"></canvas>
					</li>
					<li class="div_sensor_sala3 sensor_sala">
					Sensor 3
					</li>
					<li class="div_sensor_sala4 sensor_sala">
					Sensor 4
					</li>
					<li class="div_sensor_sala5 sensor_sala">
					Sensor 5
					</li>
					<li class="div_sensor_sala6 sensor_sala">
					Sensor 6
					</li>
					<li class="div_sensor_sala7 sensor_sala">
					Sensor 7
					</li>
					<li class="div_sensor_sala8 sensor_sala">
					Sensor 8
					</li>
					<li class="div_sensor_sala9 sensor_sala">
					Sensor 9
					</li>
				</ul>
			</div>
			<div class="div_graficos_main">
				<canvas id="mainGraficoUmidade"></canvas>
				<canvas id="mainGraficoUmidadeMedia"></canvas>
			</div>
			<div id="chartdiv"></div>
		</div>

		

		<aside>
			<div class="div_aviso">
				Sensores com problema
			</div>
			<div class="highcharts-figure">
				<div id="containerTemp" class="chart-container"></div>
				<div id="containerUmidade" class="chart-container"></div>
				
			</div>
		</aside>

	</main>

</body>

</html>

<script>

	//grafico barra

	// Chart code 

	am5.ready(function () {

		// Create root element
		// https://www.amcharts.com/docs/v5/getting-started/#Root_element
		var root = am5.Root.new("chartdiv");


		// // Set themes
		// // https://www.amcharts.com/docs/v5/concepts/themes/
		// root.setThemes([
		// 	am5themes_Animated.new(root)
		// ]);


		// Create chart
		// https://www.amcharts.com/docs/v5/charts/xy-chart/
		var chart = root.container.children.push(am5xy.XYChart.new(root, {
			panX: true,
			panY: true,
			wheelX: "panX",
			wheelY: "zoomX",
			pinchZoomX: true,
			layout: root.verticalLayout
		}));

		// chart.set("colors", am5.ColorSet.new(root, {
		// 	colors: [
		// 		am5.color(0x7B21C1),
		// 		am5.color(0xF2AA6B),
		// 		am5.color(0xF28F6B),
		// 		am5.color(0xA95A52),
		// 		am5.color(0xE35B5D),
		// 		am5.color(0xFFA446)
		// 	]
		// }))

		//Create axes
		//https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
		var xRenderer = am5xy.AxisRendererX.new(root, {
			minGridDistance: 50
		});

		xRenderer.grid.template.setAll({
			location: 1
		})

		var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
			maxDeviation: 0.3,
			categoryField: "country",
			renderer: xRenderer,
			tooltip: am5.Tooltip.new(root, {})
		}));

		var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
			maxDeviation: 0.3,
			min: 0,
			renderer: am5xy.AxisRendererY.new(root, {
				strokeOpacity: 0.1
			})
		}));


		// Create series
		// https://www.amcharts.com/docs/v5/charts/xy-chart/series/
		var series = chart.series.push(am5xy.ColumnSeries.new(root, {
			name: "Series 1",
			xAxis: xAxis,
			yAxis: yAxis,
			valueYField: "value",
			categoryXField: "country",
			tooltip: am5.Tooltip.new(root, {
				labelText: "{valueY}"
			}),
		}));

		series.columns.template.setAll({
			tooltipY: 0,
			tooltipText: "{categoryX}: {valueY}",
			shadowOpacity: 0.1,
			shadowOffsetX: 2,
			shadowOffsetY: 2,
			shadowBlur: 1,
			strokeWidth: 2,
			stroke: am5.color(0x7B21C1),
			shadowColor: am5.color(0x000000),
			cornerRadiusTL: 50,
			cornerRadiusTR: 50,
			fillGradient: am5.LinearGradient.new(root, {
				stops: [
					{}, // will use original column color
					{ color: am5.color(0x7B21C1) }
				]
			}),
			fillPattern: am5.GrainPattern.new(root, {
				maxOpacity: 0.15,
				density: 0.5,
				colors: [am5.color(0x000000), am5.color(0x000000), am5.color(0xffffff)]
			})
		});


		series.columns.template.states.create("hover", {
			shadowOpacity: 1,
			shadowBlur: 10,
			cornerRadiusTL: 10,
			cornerRadiusTR: 10
		})

		series.columns.template.adapters.add("fill", function (fill, target) {

		});

		// Set data
		var data = [{
			country: "USA",
			value: 2025
		}, {
			country: "China",
			value: 1282
		}, {
			country: "Japan",
			value: 909
		}, {
			country: "Germany",
			value: 752
		}, {
			country: "UK",
			value: 652
		}, {
			country: "Italy",
			value: 452
		}];

		xAxis.data.setAll(data);
		series.data.setAll(data);

		// Make stuff animate on load
		// https://www.amcharts.com/docs/v5/concepts/animations/
		series.appear(1000);
		chart.appear(1000, 100);

	}); // end am5.ready()

	//grafico 1
	var gaugeOptions = {
		chart: {
			type: 'solidgauge'
		},
		title: null,
		pane: {
			center: ['50%', '85%'],
			size: '140%',
			startAngle: -90,
			endAngle: 90,
			background: {
				backgroundColor:
					Highcharts.defaultOptions.legend.backgroundColor || '#EEE',
				innerRadius: '60%',
				outerRadius: '100%',
				shape: 'arc'
			}
		},
		exporting: {
			enabled: false
		},
		tooltip: {
			enabled: false
		},
		// the value axis
		yAxis: {
			stops: [
				[0.0, '#46e11f'], // green
				[0.7, '#DDDF0D'], // yellow
				[0.9, '#DF5353'] // red
			],
			lineWidth: 0,
			tickWidth: 0,
			minorTickInterval: null,
			tickAmount: 2,
			title: {
				y: -70
			},
			labels: {
				y: 16
			}
		},
		plotOptions: {
			solidgauge: {
				dataLabels: {
					y: 5,
					borderWidth: 0,
					useHTML: true
				}
			}
		}
	};

	// The temp gauge
	var chartSpeed = Highcharts.chart('containerTemp', Highcharts.merge(gaugeOptions, {
		yAxis: {
			min: 0,
			max: 40,
			title: {
				text: 'Temperatura'
			}
		},
		credits: {
			enabled: false
		},
		series: [{
			name: 'temp',
			data: [20],
			dataLabels: {
				format:
					'<div style="text-align:center">' +
					'<span style="font-size:25px">{y}</span><br/>' +
					'<span style="font-size:12px;opacity:0.4">°C</span>' +
					'</div>'
			},
			tooltip: {
				valueSuffix: '°C'
			}
		}]
	}));

	// The RPM gauge
	var chartRpm = Highcharts.chart('containerUmidade', Highcharts.merge(gaugeOptions, {
		yAxis: {
			min: 0,
			max: 100,
			title: {
				text: 'Umidade'
			}
		},
		series: [{
			name: 'umidade',
			data: [50],
			dataLabels: {
				format:
					'<div style="text-align:center">' +
					'<span style="font-size:25px">{y:.1f}</span><br/>' +
					'<span style="font-size:12px;opacity:0.4">' +
					' %' +
					'</span>' +
					'</div>'
			},
			tooltip: {
				valueSuffix: '%'
			}
		}]
	}));

	//grafico 2

	const xValues = ["12:00", "13:00", "14:00", "15:00", "16:00", "17:00"];
	const yValues = [80, 82, 80, 85, 85, 83];

	const yValues2 = [30, 29, 28, 25, 22, 23];
	new Chart("mainGraficoUmidade2", {
		type: "line",
		data: {
			labels: xValues,
			datasets: [{
				label: 'Umidade',
				fill: false,
				lineTension: 0,
				backgroundColor: "rgba(0,0,255,1.0)",
				borderColor: "rgba(0,0,255,1.0)",
				data: yValues,
			},]
		},
		options: {
			legend: {
				display: true,
			},
			scales: {
				yAxes: [{
					ticks: {
						min: 20,
						max: 90
					}
				}],
			}
		}
	});

	new Chart("mainGraficoUmidade3", {
		type: "line",
		data: {
			labels: xValues,
			datasets: [{
				label: 'Umidade',
				fill: false,
				lineTension: 0,
				backgroundColor: "rgba(0,0,255,1.0)",
				borderColor: "rgba(0,0,255,1.0)",
				data: yValues,
			},]
		},
		options: {
			legend: {
				display: true,
			},
			scales: {
				yAxes: [{
					ticks: {
						min: 20,
						max: 90
					}
				}],
			}
		}
	});

	new Chart("mainGraficoUmidade", {
		type: "line",
		data: {
			labels: xValues,
			datasets: [{
				label: 'Umidade',
				fill: false,
				lineTension: 0,
				backgroundColor: "rgba(0,0,255,1.0)",
				borderColor: "rgba(0,0,255,1.0)",
				data: yValues,
			},]
		},
		options: {
			legend: {
				display: true,
			},
			scales: {
				yAxes: [{
					ticks: {
						min: 20,
						max: 90
					}
				}],
			}
		}
	});

	const xGrafico = ["Janeiro", "Fevereiro", "Marco", "Abril", "Maio", "Junho"];
	const BlueBar = [90, 88, 92, 86, 87, 82]
	const RedBar = [22, 24, 27, 23, 20, 18];

	const BarColors = ["Red", "Blue"];

	new Chart("mainGraficoUmidadeMedia", {
		type: "line",
		data: {
			labels: xGrafico,
			datasets: [{
				label: 'Umidade media',
				fill: false,
				lineTension: 0,
				backgroundColor: "rgba(255,0,0,1.0)",
				borderColor: "rgba(255,0,0,1.0)",
				data: RedBar
			},]
		},
		options: {
			legend: {
				display: true,
			},
			scales: {
				yAxes: [{
					ticks: {
						min: 0,
						max: 100
					}
				}],
			}
		}
	});
	var sala = 0;
	function fecharSalas() {
		if (sala == 0) {
			document.querySelector('.div_salas').style.display = 'block';
			document.querySelector('.div_graficos_main').style.display = 'none';
			sala++;
		} else {
			document.querySelector('.div_salas').style.display = 'none';
			document.querySelector('.div_graficos_main').style.display = 'flex';
			sala--;
		}
	}




</script>
